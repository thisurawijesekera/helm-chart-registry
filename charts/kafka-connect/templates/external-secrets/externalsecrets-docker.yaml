{{- if .Values.externalSecrets.dockerCreds.enabled }}
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: es-dockerhub-creds
  namespace: {{ .Values.namespace }}
  annotations:
    {{- include "dsre-charts-common.external-secrets-annotations" . | nindent 8 }}  
spec:
  refreshInterval: {{ .Values.externalSecrets.refreshInterval | default "1h" }}
  secretStoreRef:
    name: cluster-secret-store
    kind: ClusterSecretStore
  target:
    name: dockerhub-creds
    template:
      type: kubernetes.io/dockerconfigjson
      data:            
        {{- include "dsre-charts-common.dockerhub-creds" . | nindent 8 }}
  data: 
   {{- include "dsre-charts-common.dockerhub-creds-data" . | nindent 2 }}      
{{- end }}        
